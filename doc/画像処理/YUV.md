# YUVフォーマット

## YUV
- 色情報の表現形式の一つで、輝度信号（Y）と、輝度信号と青色成分の差（U）、輝度信号と赤色成分の差（V）の3つの組み合わせで色を表現する方式。
- また、そのような形式で表される色空間。

- 人間の目が色の変化よりも明るさの変化に敏感な性質を利用して、輝度情報により多くの情報量を割り当てることで、少ない画質の劣化で高いデータ圧縮率を得ることができる。
    - 人間の目をうまく欺いて、データの容量を削減するための圧縮フォーマット
    - RGBで1pixelを表すと、R, G, B で8bitずつ、計24bit必要だが、YUVでは 輝度信号(白黒) と 色差信号 に分割し、色差信号 の情報量を減らす(ダウンサンプリングする)ことで伝送効率等を良くする。

- テレビ放送の映像信号や、JPEG、MPEGなどの画像・映像データ圧縮に用いられる。コンピュータのディスプレイに表示するにはRGB形式による表現に変換する必要がある。



## ストレート変換とYC伸長の違い【YUV →　RGB】

### ストレート変換
- YUVの色範囲は、以下ですが、RGBは「0～255」なので、YUVの値をそのままRGBで使うと色がおかしな事になります。
    - Y：「16～235」  
    - UV「16-240」  

- 例えば、

    - YUVで言う所の「15」は「黒色」ですが、RGBで言う所の「15」は、「微妙に薄い黒色」になります。
    - YUVで言う所の「235」は「白色」ですが、RGBで言う所の「235」は、「微妙に灰色気味な白色」になります。


- それを補正せずに、そのままRGBとして変換することを「ストレート変換」と言います。  
    ※ちなみに0～255までの色範囲を持つYUVも存在します。（そんなYUVのことをフルレンジYUVと呼びます）



### YC伸長
- 範囲を補正してRGB変換することを「YC伸長」と呼びます。（ちなみに「YC」は、「Y」が輝度、「C」が色差のこと）
- YUVな動画は「YC伸長」しないと、全体的に灰色掛かった色になってしまうということです。

### 変換すると色は劣化する
- 動画編集の段階では、色変換は極力行うべきでない
- できる限り色空間は維持する
- 色変換は再生時に、再生ソフト・コーデック行わせる
- YUVな動画の場合は、「これはTVスケールの動画だ！」という風にコーデックとかが勝手に判断してくれてYC伸長してくれる  
（だからパソコンでテレビソースな動画を観ても色に違和感なくみれる）


## REFERENCE

YUVフォーマットの違い  
https://qiita.com/Yossy_Hal/items/8e0b9676698ba552c210  

YUVフォーマット  
https://hk.interaction-lab.org/firewire/yuv.html  


YCbCrとクロマサブサンプリング  
https://videotech.densan-labs.net/articles/2017/08/28/yuv444-422-420.html  

RGB データと YUV データについて  
https://www.eizo.co.jp/products/tech/files/2010/WP10-009.pdf  


OpenGL関連

【GLSL】YUV色空間とHSV色空間  
https://blog.narumium.net/2020/05/31/%E3%80%90glsl%E3%80%91yuv%E8%89%B2%E7%A9%BA%E9%96%93%E3%81%A8hsv%E8%89%B2%E7%A9%BA%E9%96%93/  

